# üì∞ Newsly AI - Your AI-Powered NewsWall

> Votre agr√©gateur d'actualit√©s personnalis√© aliment√© par l'intelligence artificielle

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/ju-nocode/newsly-ai)
[![Live Demo](https://img.shields.io/badge/demo-live-success)](https://prod-julien.vercel.app)

## üåü Fonctionnalit√©s

### üîê Authentification & Profil
- **Inscription/Connexion** s√©curis√©e avec Supabase Auth
- **Gestion de profil** compl√®te (username, nom complet, t√©l√©phone, bio, avatar)
- **Changement de mot de passe** s√©curis√©
- **Suppression de compte** avec double confirmation
- **Session persistante** avec localStorage

### üì∞ Actualit√©s
- **Agr√©gation d'actualit√©s** via NewsAPI
- **7 cat√©gories** : G√©n√©ral, Business, Technologie, Science, Sant√©, Sports, Divertissement
- **Topics personnalis√©s** : Ajoutez vos propres sujets d'int√©r√™t
- **Actualisation en temps r√©el**
- **Affichage carte** avec image, titre, description, source et date

### üåç Multilingue
- **Traduction compl√®te** FR/EN
- **Switch langue** dynamique sans rechargement
- **Syst√®me de traduction** avec fallback local

### üé® Th√®me
- **Mode Dark/Light** avec switch √©l√©gant
- **Persistance** du th√®me s√©lectionn√©
- **Design moderne** inspir√© de Supabase
- **Responsive** mobile-first

### üîí S√©curit√©
- ‚úÖ **Validation stricte** de tous les inputs (API + Frontend)
- ‚úÖ **Protection XSS** avec `escapeHtml()`
- ‚úÖ **Headers de s√©curit√©** (CORS, CSP, X-Frame-Options, HSTS)
- ‚úÖ **Rate limiting** client & serveur
- ‚úÖ **Service Role Key** pour op√©rations admin
- ‚úÖ **HTTPS** automatique via Vercel
- ‚úÖ **Pas d'exposition** des cl√©s API c√¥t√© client

## üöÄ Stack Technique

### Frontend
- **HTML5** + **CSS3** (Variables CSS, Grid, Flexbox)
- **Vanilla JavaScript** (ES6 Modules)
- **Architecture modulaire** : app.js, dashboard-utils.js, translation-service.js

### Backend
- **Vercel Serverless Functions** (Node.js)
- **API Routes** : `/api/auth/*`, `/api/user/*`, `/api/news`
- **Build Output API v3** pour d√©ploiement optimis√©

### Services
- **Supabase** - Authentification & stockage (user_metadata)
- **NewsAPI** - Agr√©gation d'actualit√©s
- **Vercel** - H√©bergement & d√©ploiement

## üìÅ Structure du Projet

```
newsly-ai/
‚îú‚îÄ‚îÄ api/                          # API Serverless Functions
‚îÇ   ‚îú‚îÄ‚îÄ _middleware/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ security.js          # Fonctions de s√©curit√© (validation, sanitization)
‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login.js             # POST /api/auth/login
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ signup.js            # POST /api/auth/signup
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ resend.js            # POST /api/auth/resend
‚îÇ   ‚îú‚îÄ‚îÄ user/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profile.js           # GET/PUT /api/user/profile
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ change-password.js   # POST /api/user/change-password
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ delete.js            # DELETE /api/user/delete
‚îÇ   ‚îî‚îÄ‚îÄ news.js                   # GET /api/news
‚îÇ
‚îú‚îÄ‚îÄ public/                       # Assets statiques
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ styles.css           # CSS global (30KB)
‚îÇ   ‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app.js               # Logique principale + Auth
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard-utils.js   # Utilitaires + Protection XSS
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ translation-service.js  # Syst√®me de traduction
‚îÇ   ‚îú‚îÄ‚îÄ images/                  # Images (vide, pr√™t √† utiliser)
‚îÇ   ‚îî‚îÄ‚îÄ fonts/                   # Polices (vide, pr√™t √† utiliser)
‚îÇ
‚îú‚îÄ‚îÄ docs/                         # Documentation
‚îÇ   ‚îú‚îÄ‚îÄ ARCHITECTURE.md          # Architecture technique d√©taill√©e
‚îÇ   ‚îî‚îÄ‚îÄ SECURITY_IMPLEMENTATION.md  # Guide de s√©curit√© complet
‚îÇ
‚îú‚îÄ‚îÄ index.html                    # Page d'accueil + Auth modale
‚îú‚îÄ‚îÄ dashboard.html                # Dashboard principal
‚îú‚îÄ‚îÄ settings.html                 # Param√®tres utilisateur
‚îÇ
‚îú‚îÄ‚îÄ build.js                      # Script de build pour Vercel
‚îú‚îÄ‚îÄ vercel.json                   # Configuration Vercel
‚îú‚îÄ‚îÄ package.json                  # D√©pendances
‚îú‚îÄ‚îÄ .env.example                  # Template variables d'environnement
‚îú‚îÄ‚îÄ .gitignore                    # Fichiers ignor√©s par Git
‚îî‚îÄ‚îÄ .vercelignore                 # Fichiers ignor√©s par Vercel
```

## üõ†Ô∏è Installation & D√©ploiement

### Pr√©requis
- Node.js >= 18.0.0
- Compte Vercel (gratuit)
- Compte Supabase (gratuit)
- Compte NewsAPI (gratuit)

### 1. Cloner le projet

```bash
git clone https://github.com/ju-nocode/newsly-ai.git
cd newsly-ai
npm install
```

### 2. Configuration Supabase

1. Cr√©ez un projet sur [Supabase](https://supabase.com)
2. Allez dans **Settings ‚Üí API**
3. Copiez :
   - `Project URL` ‚Üí `SUPABASE_URL`
   - `anon public` ‚Üí `SUPABASE_ANON_KEY`
4. Allez dans **Settings ‚Üí API ‚Üí Service Role Key**
5. Copiez `service_role` ‚Üí `SUPABASE_SERVICE_ROLE_KEY`

**Important** : Le projet utilise `user_metadata` JSON. **Aucune table SQL n'est n√©cessaire** !

### 3. Configuration NewsAPI

1. Cr√©ez un compte sur [NewsAPI](https://newsapi.org)
2. Copiez votre API Key ‚Üí `NEWS_API_KEY`

### 4. Variables d'environnement

Dans Vercel Dashboard ‚Üí Settings ‚Üí Environment Variables :

```env
SUPABASE_URL=https://xxxxx.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
NEWS_API_KEY=xxxxxxxxxxxxxxxxxxxxx
```

### 5. D√©ploiement Vercel

#### Via Interface (Recommand√©)

1. Importez le repo sur [Vercel](https://vercel.com/new)
2. Framework Preset : **Other**
3. Build Command : Laissez vide (auto-d√©tect√©)
4. Ajoutez les variables d'environnement
5. Deploy ! üöÄ

#### Via CLI

```bash
npm install -g vercel
vercel login
vercel
```

### 6. D√©veloppement Local

```bash
npm run dev
# Ouvre http://localhost:3000
```

## üîë API Routes

### Authentification

| Route | Method | Auth | Description |
|-------|--------|------|-------------|
| `/api/auth/login` | POST | ‚ùå | Connexion utilisateur |
| `/api/auth/signup` | POST | ‚ùå | Inscription utilisateur |
| `/api/auth/resend` | POST | ‚ùå | Renvoyer email de confirmation |

**Body (login)** :
```json
{
  "email": "user@example.com",
  "password": "password123"
}
```

**Body (signup)** :
```json
{
  "email": "user@example.com",
  "password": "password123",
  "metadata": {
    "username": "john_doe",
    "full_name": "John Doe",
    "phone": "+33612345678"
  }
}
```

### Utilisateur

| Route | Method | Auth | Description |
|-------|--------|------|-------------|
| `/api/user/profile` | GET | ‚úÖ | R√©cup√©rer profil |
| `/api/user/profile` | PUT | ‚úÖ | Modifier profil |
| `/api/user/change-password` | POST | ‚úÖ | Changer mot de passe |
| `/api/user/delete` | DELETE | ‚úÖ | Supprimer compte |

**Headers (authentifi√©)** :
```
Authorization: Bearer <access_token>
```

### Actualit√©s

| Route | Method | Auth | Description |
|-------|--------|------|-------------|
| `/api/news` | GET | ‚ùå | R√©cup√©rer actualit√©s |

**Query params** :
- `category` : general, business, technology, science, health, sports, entertainment
- `country` : us, fr, gb, ca, de
- `page` : 1-10

**Exemple** :
```
GET /api/news?category=technology&country=us&page=1
```

## üìä Base de Donn√©es

### Structure Supabase

Le projet utilise **user_metadata JSON** au lieu de tables SQL :

```json
{
  "username": "john_doe",
  "display_name": "john_doe",
  "full_name": "John Doe",
  "phone": "+33612345678",
  "bio": "Developer & Tech Enthusiast",
  "avatar_url": "https://example.com/avatar.jpg"
}
```

**Avantages** :
- ‚úÖ Pas de migration SQL
- ‚úÖ Flexible et extensible
- ‚úÖ Int√©gr√© nativement dans Supabase Auth
- ‚úÖ Row-level security automatique

## üîß Scripts NPM

```bash
npm run dev      # D√©veloppement local (Vercel Dev)
npm run build    # Build pour production (copie fichiers statiques)
npm run deploy   # D√©ploiement Vercel
```

## üé® Personnalisation

### Couleurs (CSS Variables)

Modifiez `public/css/styles.css` :

```css
:root[data-theme="dark"] {
  --color-primary: #3ecf8e;      /* Vert principal */
  --color-bg: #0a0a0a;           /* Fond noir */
  --color-surface: #1a1a1a;      /* Surfaces */
  /* ... */
}
```

### Traductions

Ajoutez des traductions dans `public/js/translation-service.js` :

```javascript
const fallbackTranslations = {
  fr: {
    'new.key': 'Nouvelle traduction'
  },
  en: {
    'new.key': 'New translation'
  }
};
```

## üìö Documentation Compl√®te

- [üìñ ARCHITECTURE.md](docs/ARCHITECTURE.md) - Architecture technique d√©taill√©e
- [üîí SECURITY_IMPLEMENTATION.md](docs/SECURITY_IMPLEMENTATION.md) - Guide de s√©curit√© complet
- [üöÄ DEPLOYMENT.md](DEPLOYMENT.md) - Guide de d√©ploiement
- [üîê SECURITY.md](SECURITY.md) - Politique de s√©curit√©
- [üì¶ SUPABASE.md](SUPABASE.md) - Configuration Supabase

## üêõ Debugging

### Probl√®me : 404 Not Found

- V√©rifiez que le build s'est bien pass√© dans Vercel Deployments
- V√©rifiez `build.js` copie bien les fichiers dans `.vercel/output/static/`

### Probl√®me : API Routes ne fonctionnent pas

```bash
# V√©rifiez les logs Vercel
vercel logs

# V√©rifiez les variables d'environnement
vercel env ls
```

### Probl√®me : "Auth session missing"

- V√©rifiez que `SUPABASE_SERVICE_ROLE_KEY` est bien configur√©e
- Cette cl√© est n√©cessaire pour update profile et change password

## ü§ù Contribution

Les contributions sont les bienvenues !

1. Fork le projet
2. Cr√©ez une branche (`git checkout -b feature/AmazingFeature`)
3. Commit vos changements (`git commit -m 'Add AmazingFeature'`)
4. Push sur la branche (`git push origin feature/AmazingFeature`)
5. Ouvrez une Pull Request

## üìù License

Ce projet est sous licence MIT. Voir [LICENSE](LICENSE) pour plus d'informations.

## üôè Remerciements

- [Supabase](https://supabase.com) - Backend as a Service
- [Vercel](https://vercel.com) - H√©bergement & D√©ploiement
- [NewsAPI](https://newsapi.org) - Agr√©gation d'actualit√©s
- [Claude Code](https://claude.com/claude-code) - D√©veloppement assist√© par IA

## üìû Support

- üêõ **Issues** : [GitHub Issues](https://github.com/ju-nocode/newsly-ai/issues)
- üìß **Email** : security@newsly-ai.com
- üåê **Demo** : [https://prod-julien.vercel.app](https://prod-julien.vercel.app)

---

**D√©velopp√© avec ‚ù§Ô∏è par Claude Code**

ü§ñ Generated with [Claude Code](https://claude.com/claude-code)
