<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Newsly AI - Votre NewsWall Personnalis√© Aliment√© par IA</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <span class="logo-icon">üì∞</span>
                <span class="logo-text">Newsly AI</span>
            </a>

            <div class="nav-links">
                <!-- Burger Menu -->
                <button class="burger-menu" id="burgerBtnIndex">
                    <span class="burger-line"></span>
                    <span class="burger-line"></span>
                    <span class="burger-line"></span>
                </button>

                <!-- Burger Dropdown Menu -->
                <div class="burger-dropdown" id="burgerMenuIndex">
                    <!-- Auth Buttons -->
                    <button class="burger-link" id="openLoginBtn">
                        <span>üîë</span>
                        <span data-i18n="auth.login">Connexion</span>
                    </button>

                    <button class="burger-link" id="openSignupBtn">
                        <span>‚ú®</span>
                        <span data-i18n="auth.signup">Cr√©er un compte</span>
                    </button>

                    <div class="burger-divider"></div>

                    <!-- Language Toggle avec Switch -->
                    <div class="burger-item">
                        <div class="burger-item-label">
                            <span>üåç</span>
                            <span id="langLabel">Fran√ßais / English</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="langToggleIndex">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-container">
            <h1 class="hero-title">
                Votre NewsWall Personnalis√©<br>
                <span class="gradient-text">Aliment√© par l'IA</span>
            </h1>
            <p class="hero-subtitle">
                Restez inform√© avec des actualit√©s filtr√©es intelligemment selon vos centres d'int√©r√™t.
                NewslyAI analyse et organise les informations pour vous.
            </p>
            <div class="hero-cta">
                <button class="btn-hero" id="heroSignupBtn">Commencer Gratuitement</button>
                <button class="btn-secondary" id="heroLoginBtn">Se Connecter</button>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features">
        <div class="features-container">
            <h2 class="section-title">Pourquoi choisir Newsly AI ?</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">ü§ñ</div>
                    <h3 class="feature-title">Filtrage Intelligent par IA</h3>
                    <p class="feature-description">
                        Notre IA analyse et filtre les actualit√©s pour ne vous pr√©senter que l'essentiel,
                        adapt√© √† vos pr√©f√©rences.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üéØ</div>
                    <h3 class="feature-title">Personnalisation Avanc√©e</h3>
                    <p class="feature-description">
                        Choisissez vos cat√©gories favorites : technologie, business, science, sports et bien plus.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">‚ö°</div>
                    <h3 class="feature-title">Mises √† jour en Temps R√©el</h3>
                    <p class="feature-description">
                        Restez toujours √† jour avec les derni√®res actualit√©s rafra√Æchies en temps r√©el.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üíæ</div>
                    <h3 class="feature-title">Sauvegardez vos Favoris</h3>
                    <p class="feature-description">
                        Gardez une trace des articles importants et acc√©dez-y √† tout moment.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üåç</div>
                    <h3 class="feature-title">Sources Multiples</h3>
                    <p class="feature-description">
                        Acc√©dez √† des milliers de sources d'information du monde entier, toutes au m√™me endroit.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üîí</div>
                    <h3 class="feature-title">100% S√©curis√©</h3>
                    <p class="feature-description">
                        Vos donn√©es sont prot√©g√©es avec les derni√®res technologies de s√©curit√©.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Categories Preview -->
    <section class="categories-preview">
        <div class="categories-container">
            <h2 class="section-title">Explorez nos Cat√©gories</h2>
            <div class="categories-grid">
                <div class="category-preview">
                    <div class="category-preview-icon">üì∞</div>
                    <h3>G√©n√©ral</h3>
                    <p>Toutes les actualit√©s importantes</p>
                </div>
                <div class="category-preview">
                    <div class="category-preview-icon">üíº</div>
                    <h3>Business</h3>
                    <p>√âconomie et finance</p>
                </div>
                <div class="category-preview">
                    <div class="category-preview-icon">üíª</div>
                    <h3>Technologie</h3>
                    <p>Innovation et tech</p>
                </div>
                <div class="category-preview">
                    <div class="category-preview-icon">üî¨</div>
                    <h3>Science</h3>
                    <p>D√©couvertes scientifiques</p>
                </div>
                <div class="category-preview">
                    <div class="category-preview-icon">üè•</div>
                    <h3>Sant√©</h3>
                    <p>Bien-√™tre et m√©decine</p>
                </div>
                <div class="category-preview">
                    <div class="category-preview-icon">‚öΩ</div>
                    <h3>Sports</h3>
                    <p>R√©sultats et actualit√©s sportives</p>
                </div>
                <div class="category-preview">
                    <div class="category-preview-icon">üé¨</div>
                    <h3>Divertissement</h3>
                    <p>Cin√©ma, musique, culture</p>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section">
        <div class="cta-container">
            <h2 class="cta-title">Pr√™t √† commencer ?</h2>
            <p class="cta-subtitle">
                Rejoignez des milliers d'utilisateurs qui restent inform√©s avec Newsly AI
            </p>
            <button class="btn-hero" id="ctaSignupBtn">Cr√©er mon compte gratuitement</button>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-brand">
                        <span class="logo-icon">üì∞</span>
                        <span>Newsly AI</span>
                    </div>
                    <p class="footer-text">
                        Votre NewsWall personnalis√© aliment√© par l'intelligence artificielle
                    </p>
                </div>

                <div class="footer-section">
                    <h3 class="footer-title">Produit</h3>
                    <ul class="footer-links">
                        <li><a href="index.html">Accueil</a></li>
                        <li><a href="dashboard.html">Dashboard</a></li>
                        <li><a href="#features">Fonctionnalit√©s</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h3 class="footer-title">Ressources</h3>
                    <ul class="footer-links">
                        <li><a href="#">Documentation</a></li>
                        <li><a href="#">Blog</a></li>
                        <li><a href="#">Support</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h3 class="footer-title">L√©gal</h3>
                    <ul class="footer-links">
                        <li><a href="#">Confidentialit√©</a></li>
                        <li><a href="#">Conditions</a></li>
                        <li><a href="SECURITY.md">S√©curit√©</a></li>
                    </ul>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; 2025 Newsly AI. Tous droits r√©serv√©s.</p>
                <div class="footer-social">
                    <a href="#" aria-label="Twitter">üê¶</a>
                    <a href="https://github.com" aria-label="GitHub">üîó</a>
                    <a href="#" aria-label="LinkedIn">üíº</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Auth Modal -->
    <div class="modal-overlay" id="authModal">
        <div class="modal-container">
            <button class="modal-close" id="closeModal">&times;</button>

            <!-- Login Form -->
            <div class="modal-content" id="loginForm">
                <h2 class="modal-title" data-i18n="auth.loginTitle">Connexion</h2>
                <p class="modal-subtitle" data-i18n="auth.loginSubtitle">Connectez-vous √† votre compte</p>

                <form class="auth-form" id="loginFormElement">
                    <div class="form-group">
                        <label class="form-label" data-i18n="auth.email">Email</label>
                        <input type="email" class="form-input" id="loginEmail" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" data-i18n="auth.password">Mot de passe</label>
                        <input type="password" class="form-input" id="loginPassword" required>
                    </div>
                    <div id="loginError" class="error-message" style="display: none;"></div>
                    <button type="submit" class="btn-submit" data-i18n="auth.loginBtn">Se connecter</button>
                </form>

                <p class="modal-footer">
                    <span data-i18n="auth.noAccount">Pas de compte ?</span> <a href="#" id="switchToSignup" data-i18n="auth.createAccount">Cr√©er un compte</a>
                </p>
            </div>

            <!-- Signup Form -->
            <div class="modal-content" id="signupForm" style="display: none;">
                <h2 class="modal-title" data-i18n="auth.signupTitle">Cr√©er un compte</h2>
                <p class="modal-subtitle" data-i18n="auth.signupSubtitle">Rejoignez Newsly AI</p>

                <form class="auth-form" id="signupFormElement">
                    <div class="form-group">
                        <label class="form-label" data-i18n="settings.username">Nom d'utilisateur</label>
                        <input type="text" class="form-input" id="signupUsername" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" data-i18n="settings.fullName">Nom complet</label>
                        <input type="text" class="form-input" id="signupFullName">
                    </div>
                    <div class="form-group">
                        <label class="form-label" data-i18n="auth.email">Email</label>
                        <input type="email" class="form-input" id="signupEmail" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" data-i18n="settings.phone">T√©l√©phone</label>
                        <input type="tel" class="form-input" id="signupPhone" placeholder="+33 6 12 34 56 78">
                    </div>
                    <div class="form-group">
                        <label class="form-label" data-i18n="auth.password">Mot de passe</label>
                        <input type="password" class="form-input" id="signupPassword" required>
                    </div>
                    <div id="signupError" class="error-message" style="display: none;"></div>
                    <button type="submit" class="btn-submit" data-i18n="auth.signupBtn">Cr√©er mon compte</button>
                </form>

                <p class="modal-footer">
                    <span data-i18n="auth.hasAccount">D√©j√† un compte ?</span> <a href="#" id="switchToLogin" data-i18n="auth.loginLink">Se connecter</a>
                </p>
            </div>
        </div>
    </div>

    <script type="module">
        import { checkAuth, login, signup } from './js/app.js';
        import { translatePage } from './js/translation-service.js';

        // Si l'utilisateur est d√©j√† connect√©, rediriger vers le dashboard
        if (checkAuth()) {
            window.location.href = 'dashboard.html';
        }

        // Initialiser les traductions
        translatePage();

        // Gestion du modal
        const authModal = document.getElementById('authModal');
        const loginFormDiv = document.getElementById('loginForm');
        const signupFormDiv = document.getElementById('signupForm');
        const openLoginBtn = document.getElementById('openLoginBtn');
        const openSignupBtn = document.getElementById('openSignupBtn');
        const closeModal = document.getElementById('closeModal');
        const switchToSignup = document.getElementById('switchToSignup');
        const switchToLogin = document.getElementById('switchToLogin');

        // Ouvrir login
        openLoginBtn.addEventListener('click', () => {
            authModal.classList.add('show');
            loginFormDiv.style.display = 'block';
            signupFormDiv.style.display = 'none';
        });

        // Ouvrir signup
        openSignupBtn.addEventListener('click', () => {
            authModal.classList.add('show');
            loginFormDiv.style.display = 'none';
            signupFormDiv.style.display = 'block';
        });

        // Fermer modal
        closeModal.addEventListener('click', () => {
            authModal.classList.remove('show');
        });

        authModal.addEventListener('click', (e) => {
            if (e.target === authModal) {
                authModal.classList.remove('show');
            }
        });

        // Switch entre login et signup
        switchToSignup.addEventListener('click', (e) => {
            e.preventDefault();
            loginFormDiv.style.display = 'none';
            signupFormDiv.style.display = 'block';
        });

        switchToLogin.addEventListener('click', (e) => {
            e.preventDefault();
            signupFormDiv.style.display = 'none';
            loginFormDiv.style.display = 'block';
        });

        // G√©rer la soumission login
        document.getElementById('loginFormElement').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const errorDiv = document.getElementById('loginError');

            const result = await login(email, password);

            if (result.success) {
                window.location.href = 'dashboard.html';
            } else {
                errorDiv.textContent = result.error;
                errorDiv.style.display = 'block';
            }
        });

        // G√©rer la soumission signup
        document.getElementById('signupFormElement').addEventListener('submit', async (e) => {
            e.preventDefault();
            const username = document.getElementById('signupUsername').value;
            const fullName = document.getElementById('signupFullName').value;
            const email = document.getElementById('signupEmail').value;
            const phone = document.getElementById('signupPhone').value;
            const password = document.getElementById('signupPassword').value;
            const errorDiv = document.getElementById('signupError');

            const result = await signup(email, password, {
                username,
                full_name: fullName,
                phone
            });

            if (result.success) {
                window.location.href = 'dashboard.html';
            } else {
                errorDiv.textContent = result.error;
                errorDiv.style.display = 'block';
            }
        });

        // Hero buttons
        document.getElementById('heroSignupBtn').addEventListener('click', () => {
            authModal.classList.add('show');
            loginFormDiv.style.display = 'none';
            signupFormDiv.style.display = 'block';
        });

        document.getElementById('heroLoginBtn').addEventListener('click', () => {
            authModal.classList.add('show');
            loginFormDiv.style.display = 'block';
            signupFormDiv.style.display = 'none';
        });

        document.getElementById('ctaSignupBtn').addEventListener('click', () => {
            authModal.classList.add('show');
            loginFormDiv.style.display = 'none';
            signupFormDiv.style.display = 'block';
        });

        // G√©rer le burger menu
        const burgerBtnIndex = document.getElementById('burgerBtnIndex');
        const burgerMenuIndex = document.getElementById('burgerMenuIndex');

        burgerBtnIndex.addEventListener('click', (e) => {
            e.stopPropagation();
            burgerBtnIndex.classList.toggle('active');
            burgerMenuIndex.classList.toggle('show');
        });

        // Fermer le menu si on clique ailleurs
        document.addEventListener('click', () => {
            burgerBtnIndex.classList.remove('active');
            burgerMenuIndex.classList.remove('show');
        });

        // Emp√™cher la fermeture si on clique dans le menu
        burgerMenuIndex.addEventListener('click', (e) => {
            e.stopPropagation();
        });

        // Language toggle
        const langToggle = document.getElementById('langToggleIndex');
        const langLabel = document.getElementById('langLabel');
        const savedLang = localStorage.getItem('language') || 'fr';

        langToggle.checked = savedLang === 'en';

        langToggle.addEventListener('change', async () => {
            const newLang = langToggle.checked ? 'en' : 'fr';
            localStorage.setItem('language', newLang);
            // Appliquer les traductions
            await translatePage();
        });
    </script>
</body>
</html>
