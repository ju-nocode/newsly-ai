<!DOCTYPE html>
<html lang="fr" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug CSS - Search Bar</title>
    <link rel="stylesheet" href="public/css/main.css">
    <style>
        body {
            padding: 2rem;
            font-family: 'Inter', sans-serif;
        }
        .section {
            margin-bottom: 3rem;
            padding: 2rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
        }
        .section h2 {
            margin-top: 0;
            color: #111827;
        }
        .success {
            background: #d1fae5;
            border-color: #10b981;
        }
        .warning {
            background: #fef3c7;
            border-color: #f59e0b;
        }
        .error {
            background: #fee2e2;
            border-color: #ef4444;
        }
        /* Force styles for test */
        .force-styles {
            background: #f3f4f6 !important;
            border: 1px solid #e5e7eb !important;
            border-radius: 8px !important;
            height: 42px !important;
            padding: 0 1rem !important;
            width: 100% !important;
            font-size: 15px !important;
        }
    </style>
</head>
<body>
    <h1>üîç Debug CSS - Search Bar</h1>
    <p>Tests pour identifier le probl√®me de styles</p>

    <!-- Test 1 : Styles inline forc√©s -->
    <div class="section success">
        <h2>‚úÖ Test 1 : Styles Inline (Doit Fonctionner)</h2>
        <input
            type="text"
            style="background: #f3f4f6; border: 1px solid #e5e7eb; border-radius: 8px; height: 42px; padding: 0 1rem; width: 100%; font-size: 15px;"
            placeholder="Si tu vois un fond gris et une bordure, les styles inline fonctionnent"
        >
    </div>

    <!-- Test 2 : Classe avec !important -->
    <div class="section warning">
        <h2>‚ö†Ô∏è Test 2 : Classe avec !important</h2>
        <input
            type="text"
            class="force-styles"
            placeholder="Si tu vois un fond gris, les classes CSS fonctionnent"
        >
    </div>

    <!-- Test 3 : Structure search bar compl√®te -->
    <div class="section error">
        <h2>‚ùå Test 3 : Structure Search Bar R√©elle</h2>
        <div class="smart-search-wrapper" style="position: relative;">
            <div class="smart-search-container">
                <div class="smart-search-icon">
                    <img src="https://img.icons8.com/ios/18/search--v1.png" alt="Search">
                </div>
                <input
                    type="text"
                    class="smart-search-input"
                    placeholder="Si tu ne vois PAS de fond gris ici, c'est le probl√®me"
                    autocomplete="off"
                >
                <div class="search-kbd-hint">
                    <kbd class="search-kbd">‚åò</kbd>
                    <kbd class="search-kbd">K</kbd>
                </div>
                <button class="smart-search-btn">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M6.5 0a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13zm0 11.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/>
                        <path d="M13.854 13.146l-2.707-2.707a.5.5 0 0 0-.708.708l2.707 2.707a.5.5 0 0 0 .708-.708z"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Test 4 : V√©rification JS -->
    <div class="section" style="background: #ede9fe; border-color: #8b5cf6;">
        <h2>üîß Test 4 : Diagnostic JavaScript</h2>
        <button onclick="runDiagnostic()" style="padding: 0.75rem 1.5rem; background: #8b5cf6; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 16px;">
            Lancer le diagnostic
        </button>
        <pre id="diagnostic-output" style="margin-top: 1rem; padding: 1rem; background: #1f2937; color: #f9fafb; border-radius: 6px; overflow-x: auto; font-size: 12px;"></pre>
    </div>

    <script>
        function runDiagnostic() {
            const output = document.getElementById('diagnostic-output');
            let report = '=== DIAGNOSTIC CSS SEARCH BAR ===\n\n';

            // 1. V√©rifier que l'√©l√©ment existe
            const container = document.querySelector('.smart-search-container');
            report += '1. Element .smart-search-container existe: ' + (container ? '‚úÖ OUI' : '‚ùå NON') + '\n';

            if (container) {
                // 2. R√©cup√©rer les styles computed
                const styles = getComputedStyle(container);
                report += '\n2. Styles Computed:\n';
                report += '   - background: ' + styles.background + '\n';
                report += '   - backgroundColor: ' + styles.backgroundColor + '\n';
                report += '   - border: ' + styles.border + '\n';
                report += '   - borderRadius: ' + styles.borderRadius + '\n';
                report += '   - height: ' + styles.height + '\n';
                report += '   - padding: ' + styles.padding + '\n';
                report += '   - display: ' + styles.display + '\n';
                report += '   - flex: ' + styles.flex + '\n';

                // 3. V√©rifier si le background est transparent
                const bgColor = styles.backgroundColor;
                const isTransparent = bgColor === 'rgba(0, 0, 0, 0)' || bgColor === 'transparent';
                report += '\n3. Background est transparent: ' + (isTransparent ? '‚ùå OUI (PROBL√àME!)' : '‚úÖ NON') + '\n';

                // 4. V√©rifier les classes
                report += '\n4. Classes de l\'√©l√©ment: ' + container.className + '\n';
            }

            // 5. V√©rifier le th√®me
            const theme = document.documentElement.getAttribute('data-theme');
            report += '\n5. Th√®me actuel: ' + (theme || 'Non d√©fini') + '\n';

            // 6. Lister tous les stylesheets
            report += '\n6. Stylesheets charg√©s:\n';
            for (let i = 0; i < document.styleSheets.length; i++) {
                const sheet = document.styleSheets[i];
                const href = sheet.href || 'inline';
                report += '   ' + (i + 1) + '. ' + href + '\n';
            }

            // 7. V√©rifier les CSS variables
            const root = getComputedStyle(document.documentElement);
            report += '\n7. Variables CSS:\n';
            report += '   --bg-secondary: ' + root.getPropertyValue('--bg-secondary') + '\n';
            report += '   --border: ' + root.getPropertyValue('--border') + '\n';
            report += '   --primary: ' + root.getPropertyValue('--primary') + '\n';
            report += '   --text-primary: ' + root.getPropertyValue('--text-primary') + '\n';

            // 8. V√©rifier l'input
            const input = document.querySelector('.smart-search-input');
            if (input) {
                const inputStyles = getComputedStyle(input);
                report += '\n8. Input .smart-search-input:\n';
                report += '   - padding: ' + inputStyles.padding + '\n';
                report += '   - color: ' + inputStyles.color + '\n';
                report += '   - fontSize: ' + inputStyles.fontSize + '\n';
            }

            output.textContent = report;

            // Copier dans le clipboard
            navigator.clipboard.writeText(report).then(() => {
                alert('‚úÖ Diagnostic copi√© dans le presse-papier!\nEnvoie-le moi pour analyse.');
            });
        }

        // Auto-run on load
        window.addEventListener('load', () => {
            setTimeout(runDiagnostic, 500);
        });
    </script>
</body>
</html>
